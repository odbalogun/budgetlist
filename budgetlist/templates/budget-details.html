{% extends "layout.html" %}

{% block secondLayer %}
<div class="secondLayer dontprint">
    <div class="wrapper">
        <ul>
            <li>
                <a class="{% if request.path == '/dashboard'%} active {% endif %}" href="{{ url_for('.budget_overview')}}">Overview</a>
            </li>
            <li>
                <a class="{% if request.path == '/manage-budget'%} active {% endif %}" href="{{ url_for('.manage_budget')}}">Budgets</a>
            </li>
            <li>
                <a class="{% if request.path == '/budget-details'%} active {% endif %}" href="{{ url_for('.budget_details')}}">Budget Details</a>
            </li>
        </ul>
    </div>
</div>
{% endblock %}

{% block body %}

<div class="backlogs">
    <div class="wrapper clearfix">
        <div class="filterWrap clearfix mt-30 dontprint">
            <div class="col-md-8">
                <button type="button" class="btn btn-info btn-sm p-btn printPDF"><i class="fa fa-file-pdf-o" aria-hidden="true"></i> Download PDF</button>
                <button type="button" class="btn btn-primary btn-sm p-btn printMe"><i class="fa fa-print" aria-hidden="true"></i> Print</button>
            </div>
            <div class="col-md-2">
                <div class="filter">
                    <label for="">Budget Type</label>
                    <select>
                        <option value="">--Select One--</option>
                        {% for sub in budget.main_subs %}
                            <option value="{{ sub.id }}">{{ sub.name }}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>
            <div class="col-md-2">
                <div class="filter">
                    <label for="">Filter By</label>
                    <select>
                        {% for p in periods %}
                            <option value="{{ p.id }}" {% if p.is_active %} selected {% endif %}>{{ p.name }}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>
        </div>
        <div class="mainPage" id="mainPage">
            <div id="editor"></div><br><br>


            <table class="table table-bordered budgetTable">
                <thead>
                    <tr class="">
                        <th class="w-70">Name</th>
                        <th>Allocation</th>
                        <th>Performance</th>
                    </tr>
                </thead>
                <tbody>
                {% for b in budget.main_subs %}
                    <tr class="parent">
                        <td class="bold text-big">{{ b.name }}</td>
                        <td class="bold text-medium">₦{{ "{:,}".format(b.get_allocation) }}</td>
                        <td class="bold text-medium">₦{{ "{:,}".format(b.total_amount_allocated) }}</td>
                    </tr>
                    {% for pro in b.projects %}
                        <tr class="child">
                            <td class="text-medium">{{ pro.title }}</td>
                            <td class="text-small">₦{{ "{:,}".format(pro.budget_limit) }}</td>
                            <td class="text-small">₦{{ "{:,}".format(pro.amount_spent) }}</td>
                        </tr>
                    {% endfor %}
                    {% for child_sub in b.child_budgets %}
                        <tr class="child">
                            <td class="bold text-medium">{{ child_sub.name }}</td>
                            <td class="bold text-small">₦{{ "{:,}".format(child_sub.get_allocation) }}</td>
                            <td class="bold text-small">₦{{ "{:,}".format(child_sub.total_amount_allocated) }}</td>
                        </tr>

                        {% for pro in child_sub.projects %}
                            <tr class="grandChild">
                                <td class="text-medium">{{ pro.title }}</td>
                                <td class="text-small">₦{{ "{:,}".format(pro.budget_limit) }}</td>
                                <td class="text-small">₦{{ "{:,}".format(pro.amount_spent) }}</td>
                            </tr>
                        {% endfor %}

                        {% for grand_sub in child_sub.child_budgets %}
                            <tr class="grandChild">
                                <td class="bold text-medium">{{ grand_sub.name }}</td>
                                <td class="bold text-small">₦{{ "{:,}".format(grand_sub.get_allocation) }}</td>
                                <td class="bold text-small">₦{{ "{:,}".format(grand_sub.total_amount_allocated) }}</td>
                            </tr>

                            {% for pro in child_sub.projects %}
                                <tr class="greatGrandChild">
                                    <td class="text-medium">{{ pro.title }}</td>
                                    <td class="text-small">₦{{ "{:,}".format(pro.budget_limit) }}</td>
                                    <td class="text-small">₦{{ "{:,}".format(pro.amount_spent) }}</td>
                                </tr>
                            {% endfor %}
                        {% endfor %}
                    {% endfor %}
                {% endfor %}
                <tr class="Total">
                    <td class="bold text-big">Total</td>
                    <td class="bold text-medium">₦{{ "{:,}".format(budget.total_budget) }}</td>
                    <td class="bold text-medium">₦{{ "{:,}".format(budget.amount_allocated) }}</td>
                </tr>
                </tbody>
            </table>

            
            <!-- <div class="hv-container">
                <div class="hv-wrapper">

                    <div class="hv-item">

                        <div class="hv-item-parent">
                            <div class="simple-card clearfix"> 
                                <div class="col-md-12 p-0">
                                    <div class="dInfoWrap">
                                        <div class="title">Name</div>
                                        <div class="content extra">Capital Ex.</div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="dInfoWrap">
                                        <div class="title">Allocation</div>
                                        <div class="content">₦20,000,000</div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="dInfoWrap">
                                        <div class="title">Performance</div>
                                        <div class="content">₦21,000,000</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="hv-item-children">

                            <div class="hv-item-child">

                                <div class="hv-item">

                                    <div class="hv-item-parent">
                                        <div class="simple-card clearfix"> 
                                            <div class="col-md-12 p-0">
                                                <div class="dInfoWrap">
                                                    <div class="title">Name</div>
                                                    <div class="content extra">Building Offices</div>
                                                </div>
                                            </div>
                                            <div class="col-md-6 p-0">
                                                <div class="dInfoWrap">
                                                    <div class="title">Allocation</div>
                                                    <div class="content">₦20,000,000</div>
                                                </div>
                                            </div>
                                            <div class="col-md-6 p-0">
                                                <div class="dInfoWrap">
                                                    <div class="title">Performance</div>
                                                    <div class="content">₦21,000,000</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="hv-item-children">

                                        <div class="hv-item-child">
                                            <div class="simple-card clearfix"> 
                                                <div class="col-md-12 p-0">
                                                    <div class="dInfoWrap">
                                                        <div class="title">Name</div>
                                                        <div class="content extra">Build Wall</div>
                                                    </div>
                                                </div>
                                                <div class="col-md-6 p-0">
                                                    <div class="dInfoWrap">
                                                        <div class="title">Allocation</div>
                                                        <div class="content">₦20,000,000</div>
                                                    </div>
                                                </div>
                                                <div class="col-md-6 p-0">
                                                    <div class="dInfoWrap">
                                                        <div class="title">Performance</div>
                                                        <div class="content">₦21,000,000</div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>


                                        <div class="hv-item-child">
                                            <div class="simple-card clearfix"> 
                                                <div class="col-md-12 p-0">
                                                    <div class="dInfoWrap">
                                                        <div class="title">Name</div>
                                                        <div class="content extra">Buy Paints</div>
                                                    </div>
                                                </div>
                                                <div class="col-md-6 p-0">
                                                    <div class="dInfoWrap">
                                                        <div class="title">Allocation</div>
                                                        <div class="content">₦20,000,000</div>
                                                    </div>
                                                </div>
                                                <div class="col-md-6 p-0">
                                                    <div class="dInfoWrap">
                                                        <div class="title">Performance</div>
                                                        <div class="content">₦21,000,000</div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="hv-item-child">
                                            <div class="simple-card clearfix"> 
                                                <div class="col-md-12 p-0">
                                                    <div class="dInfoWrap">
                                                        <div class="title">Name</div>
                                                        <div class="content extra">Pay Bills</div>
                                                    </div>
                                                </div>
                                                <div class="col-md-6 p-0">
                                                    <div class="dInfoWrap">
                                                        <div class="title">Allocation</div>
                                                        <div class="content">₦20,000,000</div>
                                                    </div>
                                                </div>
                                                <div class="col-md-6 p-0">
                                                    <div class="dInfoWrap">
                                                        <div class="title">Performance</div>
                                                        <div class="content">₦21,000,000</div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                    </div>

                                </div>
                            </div>


                            <div class="hv-item-child">
                                <div class="simple-card clearfix"> 
                                    <div class="col-md-12 p-0">
                                        <div class="dInfoWrap">
                                            <div class="title">Name</div>
                                            <div class="content extra">Investment</div>
                                        </div>
                                    </div>
                                    <div class="col-md-6 p-0">
                                        <div class="dInfoWrap">
                                            <div class="title">Allocation</div>
                                            <div class="content">₦20,000,000</div>
                                        </div>
                                    </div>
                                    <div class="col-md-6 p-0">
                                        <div class="dInfoWrap">
                                            <div class="title">Performance</div>
                                            <div class="content">₦21,000,000</div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>

                    </div>

                </div>
            </div><br><br><br><br> -->


        </div>
    </div>
</div>

<script type="text/javascript">

</script>
{% endblock %}